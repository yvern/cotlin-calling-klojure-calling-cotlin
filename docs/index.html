<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" content="text/html" http-equiv="Content-Type" />
		<meta content="It's 2021 people.  Why aren't you programming in Clojure?  It's time. - Uncle Bob Martin" name="description" />
		<title>Clojure Introduction</title>
		<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="css/sidenotes.css" />
	</head>
	<body>
		<div class="gridlayout">
			<div class="box header">
				<h1>Clojure Introduction</h1>
				<h2>It's 2021 people.  Why aren't you programming in Clojure?  It's time. - Uncle Bob Martin</h2>
			</div>
						<div class="box subheader">
				<h3>Readme</h3>
			</div>
			<div class="box list"><h1>lib.klo</h1><p>A small example on having a Clojure library that can be used as dependency and called from a Kotlin project</p><h2>Usage</h2><p>Check out the <code>:jar</code> alias on <a href='https://github.com/yvern/cotlin-calling-klojure-calling-cotlin/blob/main/lib.klo/deps.edn'><code>deps.edn</code></a>:</p><pre><code class="clojure">  :jar {:replace-deps {com.github.seancorfield/depstar {:mvn/version &quot;2.0.211&quot;}}
        :exec-fn hf.depstar/jar
        :exec-args {:jar &quot;lib.klo.jar&quot;
                    :sync-pom true
                    :aot true
                    :compile-ns :all
                    :jvm-opts &#91;&quot;-Dclojure.compiler.direct-linking=true&quot;&#93;}}
</code></pre><p>these are not required for this setup to work, but since we dont really need some clojure features, we can trade them of for an insignificant slither of performance and unnoticeable jar size reduction</p><ul><li><code>:aot true</code></li></ul><pre><code>we don't really need to compile our source code inside the other app, we can do it aot</code></pre><ul><li><code>:compile-ns :all</code></li></ul><pre><code>usually for &#40;clojure&#41; libs we dont do aot at all, but since we want to deal with them as simple jvm classes, this forces all namespaces to be aot</code></pre><ul><li><code>:jvm-opts &#91;&quot;-Dclojure.compiler.direct-linking=true&quot;&#93;</code></li></ul><pre><code>we dont actually need the whole var lookup dynamicity features, so we can leave it out</code></pre><p>Build a deployable jar of this library:</p><pre><code>\$ clojure -X:jar</code></pre><p>This will update the generated <code>pom.xml</code> file to keep the dependencies synchronized with your <code>deps.edn</code> file. Install it locally (requires the <code>pom.xml</code> file):</p><pre><code>\$ clojure -X:install</code></pre><p>The last command will also display the maven coordinate for this library:</p><pre><code class="clojure">{net.clojars.cckc/lib.klo {:mvn/version &quot;0.1.0-SNAPSHOT&quot;}}
</code></pre><p>You can use it from Gradle (kotlin DSL) as:</p><pre><code class="kotlin">implementation&#40;&quot;net.clojars.cckc:lib.klo:0.1.0-SNAPSHOT&quot;&#41;
</code></pre></div>
			
			<div class="box subheader">
				<h3>Dependencies</h3>
			</div>
			<div class="box comment">org.clojure/clojure</div>
			<div class="box section">Maven 1.10.3</div>
			
			<div class="box subheader">
				<h3>Namespaces</h3>
			</div>
			<div class="box list">
				<div>
					<img src="img/Clojure_logo.svg" class="cljlogo">
					<img src="img/spacer.svg" class="cljlogo">
					<a href="cckc.lib.klo.html">cckc.lib.klo</a>
				</div>
			</div>
			<div class="box footer">
				Generated by <a href="https://github.com/captain-porcelain/sidenotes">Sidenotes</a>.
				&nbsp;&nbsp;
				Syntax highlighting provided by Alex Gorbatchev's <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a>
			</div>
		</div>
	</body>
</html>
